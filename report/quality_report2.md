# «Первичное исследование и оценка качества данных» (продолжение) 

## 1. Типы признаков и шкалы измерения

### Задание 1.

### 1. Классификация признаков

| Признак | Тип шкалы | Обоснование |
|---|---|---|
| `season` | **Порядковая** | Есть логический порядок (весна, лето...), но интервалы между сезонами условны. |
| `holiday` | **Номинальная** | Бинарный признак. Значения 0 и 1 - метки категорий. |
| `weather` | **Порядковая** | Состояния погоды от "ясно" (1) до "ливень/снег" (4). Порядок важен, но разница между может быть разной. |
| `temp` | **Интервальная** | Измерение в градусах Цельсия. Можно вычислять разность, но не отношения. |
| `humidity` | **Абсолютная** | Есть ноль (0% влажности). Корректно утверждение "влажность выросла в 2 раза". |
| `count` | **Абсолютная** | Дискретная абсолютная шкала. Есть ноль (отсутствие аренд). |

### 2. Смысл агрегатов
Сравним признаки: `season` (порядковая) и `count` (асолютная).

1.  **Среднее арифметическое:**
    *   `count`: **Имеет смысл.** Показывает среднюю нагрузку на сервис.
    *   `season`: **Не имеет смысла.** Среднее число сезонов 2.5 не интерпретируемо.
2.  **Медиана:**
    *   `count`: **Имеет смысл.** Делит выборку пополам, показывает нагрузку.
    *   `season`: **Ограниченный смысл.** Можно сказать "половина наблюдений относится к сезонам 1 и 2".
3.  **Мода:**
    *   **Имеет смысл (для обоих признаков).** Показывает самое частое значение.


## 2. Пропуски и их природа (MCAR / MAR / MNAR)

### Задание 2. Диагностика типа пропусков (на примере `humidity` ~10% пропусков)

1.  **Гипотезы:**
    *   **MCAR (Совершенно случайно):** Сбой датчика происходит случайно, не зависит ни от погоды, ни от времени.
    *   **MAR (Случайно, но зависимо):** Вероятность пропуска зависит от другого признака. *Пример:* Датчик чаще отказывает при низкой температуре (`temp`).
    *   **MNAR (Не случайно):** Пропуск зависит от значения самой влажности. *Пример:* Датчик не может зафиксировать слишком высокую влажность и просто не пишет значение.
2.  **Проверки:**
    *   *Для MAR:* Сравнить распределение температуры (`temp`) для строк, где `humidity` есть, и где `humidity` пропущен. Если средние температуры различаются значимо - это MAR.
    *   *Для MCAR:* Проверить корреляцию пропусков со всеми остальными признаками. Отсутствие корреляций - это MCAR.

### Задание 3. Индикатор пропуска как источник информации
1.  **Когда факт пропуска несет информацию?** Когда пропуск не случаен (MNAR). Например, в анкете пропуск графы "Наличие автомобиля" скорее всего означает его отсутствие.
2.  **Сигнал о неправильной импутации:** Если модель присваивает высокий вес индикатору пропуска, значит заполненные значения (средним) сильно искажают реальность, и модель вынуждена использовать индикатор, чтобы отличить реальные данные от выдуманных.
3.  **Примеры:**
    *   *Полезен:* Поле "имя супруга" в анкете. Пропуск сообщает о статусе "холост"
    *   *Бесполезен:* Случайный сбой записи логов на сервере.
    *   *Опасен:* Покупка автомобиля. Поле "Участие в ДТП". Если истории нет (пропуск), а мы заполним это как «Не участвовал» (самое частое значение), мы рискуем сделать ошибку.

---

## 3. Выбросы

### Задание 4. Выброс - ошибка или сигнал?
Признак: `count`. Значение выброса: **977** (при среднем 191).

1.  **Причины:** Это **сигнал**. Вероятная причина - час пик в хорошую погоду или массовое мероприятие в городе. Это объективная природа данных.
2.  **Что делать (анализ):**
    *   *Удалить:* **Хуже всего.** Мы потеряем информацию о максимальной нагрузке, не сможем планировать ресурсы для праздников.
    *   *Оставить без изменений:* **Приемлемо** для моделей на основе деревьев решений.
    *   *Преобразовать:* **Лучший вариант** для линейных моделей. Использовать логарифмирование, чтобы сгладить влияние экстремальных значений, не удаляя их.

---

## 4. Статистики

### Задание 5. Преобразование или винзоризация?
Для признака `count` (сильная правосторонняя асимметрия):

1.  **Предпочтительнее:** **Логарифмирование.** Спрос - величина, которая может расти экспоненциально. Винзоризация (обрезка хвостов) искусственно занизит реальный спрос в часы пик.
2.  **Влияние:**
    *   *Линейные модели:* Логарифм делает связь с признаками более линейной и улучшает метрики качества.
    *   *Визуализация:* Гистограмма становится **симметричной**, устраняя сильную правостороннюю асимметрию. График становится более читаемым.

### Задание 6. Средние, которые вводят в заблуждение
Для `count`: mean = 191, median = 145.

1.  **Почему различаются:** Из-за выбросов (длинного правого хвоста). Несколько часов с очень высокой арендой вытягивают среднее арифметическое вверх.
2.  **Что лучше:** **Медиана (145)** лучше отражает "типичное" значение.

---

## 5. Визуализация как инструмент мышления

### Задание 7. Неправильная диаграмма
Для отображения зависимости `count` от `temp`.

1.  **Худший выбор: Круговая диаграмма.**
2.  **Ошибки:**
    *   Круговая диаграмма показывает структуру целого, а не корреляцию двух величин.
    *   Визуально невозможно оценить тренд (растет ли спрос с температурой).
    *   Зритель может сделать ложный вывод, что мы сравниваем *доли* температур, а не ищем взаимосвязь.

### Задание 8. Разные графики - одни данные
Пара: `season` (категория) и `count` (число).

1.  **Вариант 1: Столбчатая диаграмма среднего.**
    *   *Подчёркивает:* Разницу в **среднем** объеме аренды между сезонами.
    *   *Скрывает:* Разброс значений и выбросы.
2.  **Вариант 2: Box Plot (Ящик с усами).**
    *   *Подчёркивает:* Распределение, медиану и наличие выбросов в каждом сезоне.
    *   *Легче заметить:* Зимой среднее низкое, но разброс огромный, чего не видно на столбчатой диаграмме.
